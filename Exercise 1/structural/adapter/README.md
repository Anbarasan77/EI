# Adapter Design Pattern Example: Payment Gateway Integration

This project demonstrates the **Adapter design pattern** using a payment gateway integration scenario in Java. The Adapter pattern allows incompatible interfaces to work together.

## Problem Statement

In a modern payment system, we have a `PaymentClient` that expects to interact with a `PaymentGateway` interface. However, there's an existing legacy payment system (`OldPaymentSystem`) with a different interface that cannot be directly used by the `PaymentClient`. The goal is to integrate this old system without modifying the client or the legacy system.

## Solution: Adapter Pattern

The Adapter pattern solves this by introducing an `Adapter` class (`OldPaymentSystemAdapter`) that implements the `Target` interface (`PaymentGateway`) and wraps an instance of the `Adaptee` (`OldPaymentSystem`). This adapter translates calls from the `Target` interface into calls compatible with the `Adaptee`'s interface.

## Project Structure

```
.
├── src/
│   └── main/
│       └── java/
│           └── com/
│               └── example/
│                   └── adapter/
│                       ├── LoggerUtil.java             # Utility for logging
│                       ├── ModernPaymentGateway.java   # Concrete implementation of PaymentGateway (modern system)
│                       ├── OldPaymentSystem.java       # The Adaptee (legacy system with incompatible interface)
│                       ├── OldPaymentSystemAdapter.java# The Adapter (adapts OldPaymentSystem to PaymentGateway)
│                       ├── PaymentApplication.java     # Main application with user menu
│                       ├── PaymentClient.java          # The Client (uses PaymentGateway interface)
│                       └── PaymentGateway.java         # The Target interface
└── README.md
└── payment_system.log          # Log file generated by the application
```

## Design Pattern Components

*   **Target:** `PaymentGateway` interface (`PaymentGateway.java`)
    *   Defines the domain-specific interface that `PaymentClient` uses.
*   **Adaptee:** `OldPaymentSystem` class (`OldPaymentSystem.java`)
    *   An existing class with an incompatible interface that needs to be adapted.
*   **Adapter:** `OldPaymentSystemAdapter` class (`OldPaymentSystemAdapter.java`)
    *   Implements the `PaymentGateway` (Target) interface.
    *   Contains an instance of `OldPaymentSystem` (Adaptee).
    *   Translates `processPayment` calls into `makePayment` calls on the `OldPaymentSystem`.
*   **Client:** `PaymentClient` class (`PaymentClient.java`)
    *   Collaborates with objects conforming to the `PaymentGateway` (Target) interface.
*   **Concrete Target Implementation:** `ModernPaymentGateway` class (`ModernPaymentGateway.java`)
    *   Another implementation of the `PaymentGateway` interface, representing a modern payment system that the client can use directly.

## How to Compile and Run

1.  **Navigate to the project root:**
    ```bash
    cd c:\EI\Exercise 1\structural\adapter
    ```

2.  **Compile the Java source files:**
    ```bash
    javac src/main/java/com/example/adapter/*.java
    ```

3.  **Run the application:**
    ```bash
    java -cp src/main/java com.example.adapter.PaymentApplication
    ```

## Application Usage

Once the application is running, you will see a menu:

```
--- Payment System Menu ---
1. Process payment with Modern Gateway
2. Process payment with Old Payment System (via Adapter)
3. Exit
Enter your choice:
```

*   **To process a payment with the Modern Gateway:**
    *   Enter `1` and press Enter.
    *   When prompted, enter a positive payment amount (e.g., `50.00`) and press Enter.
*   **To process a payment with the Old Payment System (via Adapter):**
    *   Enter `2` and press Enter.
    *   When prompted, enter a positive payment amount (e.g., `75.25`) and press Enter.
*   **To exit the application:**
    *   Enter `3` and press Enter.

The application includes robust logging (output to `payment_system.log`), exception handling, and input validation. It will continue to run until you explicitly choose to exit.

## Gold Standards Adherence

*   **Logging Mechanism:** Uses `java.util.logging` with `LoggerUtil` to log application events to `payment_system.log`.
*   **Exception Handling:** Comprehensive `try-catch` blocks are used to handle `InputMismatchException` for user input and general `Exception` for unexpected errors.
*   **Transient Error Handling:** The `getPaymentAmount` method includes a retry mechanism (`MAX_RETRIES`) for invalid input.
*   **Defensive Programming:** Input validations (e.g., positive payment amount) are in place.
*   **Validations at all levels:** User input is validated for correctness and type.
*   **No hardcoding of boolean flags:** The main application loop uses a `boolean running` flag that is controlled by user input, not a hardcoded `while(true)`.
*   **Optimized for performance:** For this specific use case, the performance considerations are minimal, but the code is written efficiently without unnecessary overhead.
